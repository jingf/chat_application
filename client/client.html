<head>
  <title>Chat Application</title>
</head>

<body>
  <!-- If logged in, display the chatrooms -->
  {{> loggedIn}}
</body>

<template name="loggedIn">
  {{#if loggedIn}}
    {{> menu}}
    {{> welcome}}
    <p>Logged in as {{loggedInUser.name}}.  Currently {{loggedInUser.status}}</p>
    {{> onlineUsers}}
    {{> room}}
    {{> messages}}
  <!-- Otherwise, display login screen -->
  {{else}}
    <h1>Chat Application</h1>
    {{> welcome}}
    {{> login }}
    {{> register }}
  {{/if}}
</template>

<template name="welcome">
  <h2>Welcome to the example chat application!</h2>
</template>

<template name="menu">
  <nav class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">Meteor Chat</a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        
      </ul>

      <ul class="nav navbar-nav navbar-right">
        {{> logout}}
      </ul>
    </div>
  </nav>
</template>

<template name="logout">
  <form id="logout-form" action="action">
    <!-- <input type=hidden name=dis value=yes> -->
    <input type=submit value="Sign Out">
  </form>
</template>

<template name="onlineUsers">
  {{#each onlineUsersArray}}
    <div class="row-fluid">
      <div class="span2">
        <li>{{email}}</li>
      </div>
    </div>
  {{/each}}  
</template>

<template name="room">
  <div class="row-fluid">
    <div class="span4">
      <p>Create new Chatroom: <input type="text" id="room_name"></p>
    </div>
  </div>
</template>

<template name="input">
  <p>Message: <input type="text" class="message"></p>
</template>

<template name="messages">
  {{#each ChatRoom}}
    <div class="chatroom" id="{{id}}">
    <strong>name</strong>: {{name}}<br>
    {{> input}}
    {{#each RoomMessages}}
      [{{fmtTime time}}] <strong>{{sender}}:</strong> {{text}}<br>
    {{/each}}
    </div>
  {{/each}}
</template>

<template name="login">
  <form id="login-form" action="action">
      <div>
        Email <input type="email" id="login-email" /><br />
        Password <input type="password" id="login-password" /> <br />
        <input type="submit" id="login-button" value="Sign in" />
      </div>
   </form> 
</template>

<template name="register">
  <form id="register-form" action="action">
      <div>
       Name <input type="text" id="account-username" /><br />
       Email <input type="email" id="account-email" /><br />
       Password <input type="password" id="account-password" /><br />
       <input type="submit" id="create-account" value="Create an Account" />
     </div>
   </form>
</template>